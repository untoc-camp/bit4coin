<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" type="text/css" href="static/signin.css">
    <script src="/static/main.js"></script>
    <title>Sign in</title>
    <script>
        async function signup() {
            const user_name = document.getElementById("user_name").value;
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            const api_key = document.getElementById("api_key").value;
            const api_key_secret = document.getElementById("api_key_secret").value;


            try {
                const response = await axios.post("/signup", {
                    user_name: user_name,
                    email: email,
                    password: password,
                    api_key: api_key,
                    api_key_secret: api_key_secret
                });
                
                // ì‘ë‹µì´ ì„±ê³µì ìœ¼ë¡œ ì™”ì„ ë•Œ
                alert("íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
                console.log(response.data);
                goTo("more")
            } catch (error) {
                // ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì„ ë•Œ
                if (error.response) {
                    // ì„œë²„ê°€ ì‘ë‹µí–ˆì§€ë§Œ ìƒíƒœ ì½”ë“œê°€ 2xx ë²”ìœ„ë¥¼ ë²—ì–´ë‚œ ê²½ìš°
                    alert("íšŒì›ê°€ì…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: " + error.response.data.detail);
                    console.error(error.response.data);
                } else if (error.request) {
                    // ìš”ì²­ì´ ë§Œë“¤ì–´ì¡Œì§€ë§Œ ì‘ë‹µì„ ë°›ì§€ ëª»í•œ ê²½ìš°
                    alert("ì„œë²„ë¡œë¶€í„° ì‘ë‹µì´ ì—†ìŠµë‹ˆë‹¤. ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                    console.error(error.request);
                } else {
                    // ìš”ì²­ì„ ì„¤ì •í•˜ëŠ” ì¤‘ì— ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš°
                    alert("ìš”ì²­ì„ ë³´ë‚´ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                    console.error('Error', error.message);
                }
            }
        }
    </script>
</head> 
<body>
    <h1>sign in</h1>
    <div>ì‚¬ìš©ì•½ê´€ ~~ ë° ìœ ì˜ì‚¬í•­</div> 
    <!-- ëª¨ë‹¬ì°½ ë§Œë“¤ê¸° -->
    <form onsubmit="event.preventDefault(); signup();">
        <input type="checkbox" required>í™•ì¸í–ˆìŠµë‹ˆë‹¤.</input>
        <div class="info">ğŸ‘‰idë¥¼ ì…ë ¥í•˜ì„¸ìš”</div> 
        <input type="text" placeholder="your id here" id="user_name" required>
        <div class="info">ğŸ”’ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”</div>
        <input type="password" placeholder="type your password" id="password" required>
        <!--ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ê¸°ëŠ¥ ë§Œë“¤ê¸°-->
        <div class="info">ğŸ“§ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”</div>
        <input type="email" placeholder="type your email" id="email" required>
        <div class="info">ğŸ”‘api keyë¥¼ ì…ë ¥í•˜ì„¸ìš”</div>
        <input type="text" placeholder="api key here" id="api_key" required>
        <div class="info">ğŸ”‘api key:secretì„ ì…ë ¥í•˜ì„¸ìš”</div>
        <input type="text" placeholder="api key secret" id="api_key_secret" required>
        <button type="submit" id="submit">ê°€ì…í•˜ê¸°</button>
    </form>
    <div id="si" style="margin-top: 20px;"><button onclick="goTo('')">back</button></div>
</body>
</html>